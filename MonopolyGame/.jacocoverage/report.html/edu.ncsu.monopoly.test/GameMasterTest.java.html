<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>GameMasterTest.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;MonopolyGame&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">edu.ncsu.monopoly.test</a> &gt; <span class="el_source">GameMasterTest.java</span></div><h1>GameMasterTest.java</h1><pre class="source lang-java linenums">package edu.ncsu.monopoly.test;



import java.util.ArrayList;

import edu.ncsu.monopoly.GameMaster;
import edu.ncsu.monopoly.MonopolyGUI;
import edu.ncsu.monopoly.Player;
import edu.ncsu.monopoly.RespondDialog;
import edu.ncsu.monopoly.TradeDeal;
import edu.ncsu.monopoly.TradeDialog;
import edu.ncsu.monopoly.test.MockGUI;
import edu.ncsu.monopoly.test.boardScenarios.GameBoardFull;

import junit.framework.TestCase;
import static junit.framework.TestCase.assertEquals;
import static junit.framework.TestCase.assertFalse;
import static junit.framework.TestCase.assertTrue;
import org.junit.Test;

<span class="fc" id="L22">public class GameMasterTest extends TestCase {</span>

	GameMaster gameMaster;
	
	protected void setUp() throws Exception {
<span class="fc" id="L27">		gameMaster = GameMaster.instance();</span>
<span class="fc" id="L28">		gameMaster.setGameBoard(new GameBoardFull());</span>
<span class="fc" id="L29">		gameMaster.setNumberOfPlayers(2);</span>
<span class="fc" id="L30">        gameMaster.getPlayer(0).setName(&quot;Player 1&quot;);</span>
<span class="fc" id="L31">        gameMaster.getPlayer(1).setName(&quot;Player 2&quot;);</span>
<span class="fc" id="L32">		gameMaster.reset();</span>
<span class="fc" id="L33">		gameMaster.setTestMode(true);</span>
<span class="fc" id="L34">        gameMaster.setGUI(new MockGUI());</span>
<span class="fc" id="L35">        gameMaster.startGame();</span>
<span class="fc" id="L36">	}</span>
	@Test
	public void testInit() {
<span class="fc" id="L39">		assertEquals(gameMaster.getInitAmountOfMoney(),</span>
<span class="fc" id="L40">				gameMaster.getPlayer(0).getMoney());</span>
<span class="fc" id="L41">	}</span>
	@Test
	public void testReset() {
<span class="fc" id="L44">		gameMaster.movePlayer(0, 3);</span>
<span class="fc" id="L45">		gameMaster.movePlayer(1, 4);</span>
<span class="fc" id="L46">		gameMaster.reset();</span>
<span class="fc bfc" id="L47" title="All 2 branches covered.">		for(int i = 0; i &lt; gameMaster.getNumberOfPlayers(); i++) {</span>
<span class="fc" id="L48">			Player player = gameMaster.getPlayer(i);</span>
<span class="fc" id="L49">			assertEquals(&quot;Go&quot;, player.getPosition().getName());</span>
		}
<span class="fc" id="L51">		assertEquals(0, gameMaster.getTurn());</span>
<span class="fc" id="L52">	}</span>
        @Test
    public void testTradeButtonEnabled() {
<span class="fc" id="L55">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L56">        assertTrue(gui.isTradeButtonEnabled(0));</span>
<span class="fc" id="L57">    }</span>
    @Test
    public void testTradeButtonDisabled() {
<span class="fc" id="L60">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L61">        assertFalse(gui.isTradeButtonEnabled(1));</span>
<span class="fc" id="L62">    }</span>
     @Test
    public void testTradeMoveButtonDisabled1() {
<span class="fc" id="L65">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L66">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L67">        assertFalse(gui.isTradeButtonEnabled(0));</span>
<span class="fc" id="L68">    }</span>
    @Test
    public void testTradeMoveButtonDisabled2() {
<span class="fc" id="L71">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L72">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L73">        assertFalse(gui.isTradeButtonEnabled(1));</span>
<span class="fc" id="L74">    }</span>
    @Test
    public void testTradeProcessEqCell() {
<span class="fc" id="L77">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L78">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L79">        gameMaster.getCurrentPlayer().purchase();</span>
<span class="fc" id="L80">        assertEquals(gameMaster.getGameBoard().getCell(1),gameMaster.getCurrentPlayer().getAllProperties()[0]);</span>
<span class="fc" id="L81">    }</span>
  
     @Test
    public void testTradeOneSeller() {
<span class="fc" id="L85">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L86">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L87">        gameMaster.getCurrentPlayer().purchase();</span>
<span class="fc" id="L88">        gameMaster.btnEndTurnClicked();</span>
<span class="fc" id="L89">        TradeDialog dialog = gui.openTradeDialog();</span>
<span class="fc" id="L90">        assertEquals(1, gameMaster.getNumberOfSellers());</span>
<span class="fc" id="L91">    }</span>
    @Test
    public void testTradeFirstSeller() {
<span class="fc" id="L94">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L95">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L96">        gameMaster.getCurrentPlayer().purchase();</span>
<span class="fc" id="L97">        gameMaster.btnEndTurnClicked();</span>
<span class="fc" id="L98">        TradeDialog dialog = gui.openTradeDialog();</span>
<span class="fc" id="L99">        ArrayList sellerList = gameMaster.getSellerList();</span>
<span class="fc" id="L100">        assertEquals(gameMaster.getPlayer(0), sellerList.get(0));</span>
<span class="fc" id="L101">    }</span>
     @Test
    public void testTradeResponse() {
<span class="fc" id="L104">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L105">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L106">        gameMaster.getCurrentPlayer().purchase();</span>
<span class="fc" id="L107">        gameMaster.btnEndTurnClicked();</span>
<span class="fc" id="L108">        TradeDialog dialog = gui.openTradeDialog();</span>
<span class="fc" id="L109">        ArrayList sellerList = gameMaster.getSellerList();</span>
<span class="fc" id="L110">        TradeDeal deal = dialog.getTradeDeal();</span>
<span class="fc" id="L111">        RespondDialog respond = gui.openRespondDialog(deal);</span>
<span class="fc" id="L112">        Player player1 = gameMaster.getPlayer(0);</span>
<span class="fc" id="L113">        Player player2 = gameMaster.getPlayer(1);</span>
<span class="fc" id="L114">        assertTrue(respond.getResponse());</span>
<span class="fc" id="L115">    }</span>
    @Test
    public void testTradeProcessAmounts() {
<span class="fc" id="L118">        MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L119">        gameMaster.movePlayer(0, 1);</span>
<span class="fc" id="L120">        gameMaster.getCurrentPlayer().purchase();</span>
<span class="fc" id="L121">        gameMaster.btnEndTurnClicked();</span>
<span class="fc" id="L122">        TradeDialog dialog = gui.openTradeDialog();</span>
<span class="fc" id="L123">        ArrayList sellerList = gameMaster.getSellerList();</span>
<span class="fc" id="L124">        TradeDeal deal = dialog.getTradeDeal();</span>
<span class="fc" id="L125">        RespondDialog respond = gui.openRespondDialog(deal);</span>
<span class="fc" id="L126">        Player player1 = gameMaster.getPlayer(0);</span>
<span class="fc" id="L127">        Player player2 = gameMaster.getPlayer(1);</span>
<span class="fc" id="L128">        gameMaster.completeTrade(deal);</span>
<span class="fc" id="L129">        assertEquals(1440 + deal.getAmount(), player1.getMoney());</span>
<span class="fc" id="L130">        assertEquals(1500 - deal.getAmount(), player2.getMoney());</span>
<span class="fc" id="L131">        assertFalse(player1.checkProperty(deal.getPropertyName()));</span>
<span class="fc" id="L132">        assertTrue(player2.checkProperty(deal.getPropertyName()));</span>
    
<span class="fc" id="L134">    }</span>
	@Test
	public void testTurn() {
<span class="fc" id="L137">		assertEquals(0, gameMaster.getTurn());</span>
<span class="fc" id="L138">		gameMaster.switchTurn();</span>
<span class="fc" id="L139">		assertEquals(1, gameMaster.getTurn());</span>
<span class="fc" id="L140">		gameMaster.switchTurn();</span>
<span class="fc" id="L141">		assertEquals(0, gameMaster.getTurn());</span>
<span class="fc" id="L142">	}</span>
	
	
	@Test
	public void testButtonPurchasePropertyClicked() {
<span class="fc" id="L147">		MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L148">		gameMaster.movePlayer(0,1);</span>
<span class="fc" id="L149">		gameMaster.btnPurchasePropertyClicked();</span>
<span class="fc" id="L150">		assertEquals(gameMaster.getGameBoard().getCell(1), gameMaster.getCurrentPlayer().getAllProperties()[0]);</span>
<span class="fc" id="L151">		assertEquals(1440,gameMaster.getCurrentPlayer().getMoney());</span>
<span class="fc" id="L152">	}</span>
	@Test
	public void testButtonRollDiceClicked() {
<span class="fc" id="L155">		gameMaster.reset();</span>
<span class="fc" id="L156">		MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L157">		gameMaster.btnRollDiceClicked();</span>
<span class="fc" id="L158">		assertEquals(0,gameMaster.getCurrentPlayerIndex());</span>
<span class="fc" id="L159">		assertEquals(gameMaster.getGameBoard().getCell(5), gameMaster.getPlayer(0).getPosition());</span>
<span class="fc" id="L160">	}</span>
	@Test
	public void testButtonTradeClicked() {
<span class="fc" id="L163">		MonopolyGUI gui = gameMaster.getGUI();</span>
<span class="fc" id="L164">		gameMaster.movePlayer(0,1);</span>
<span class="fc" id="L165">		gameMaster.getCurrentPlayer().purchase();</span>
<span class="fc" id="L166">		gameMaster.btnEndTurnClicked();</span>
<span class="fc" id="L167">		gameMaster.btnTradeClicked();</span>
<span class="fc" id="L168">		assertEquals(gameMaster.getGameBoard().getCell(1),gameMaster.getCurrentPlayer().getAllProperties()[0]);</span>
<span class="fc" id="L169">		assertEquals(1640,gameMaster.getPlayer(0).getMoney());</span>
<span class="fc" id="L170">		assertEquals(1300,gameMaster.getPlayer(1).getMoney());</span>
<span class="fc" id="L171">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>